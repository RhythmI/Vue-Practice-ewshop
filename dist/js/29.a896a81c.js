"use strict";(self["webpackChunkewshop"]=self["webpackChunkewshop"]||[]).push([[29],{3080:function(t,e,a){a.d(e,{Z:function(){return m}});var o=a(6252),l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAsdJREFUaEPtmc+LTlEYxz/fDbFhIcmCLESxUBRl4UexQMnGpDQahkZpkISFaSYlpPwcv5UtSXaWlBJlYSNFUf4Bv5bUV6fOTLfbyXvnvve+Mzfvs3zvPed+Pud5znufe69oeKjh/HQFJjuD3Qz89xmwvRE4LWlDmcWY1BKyfRC4DEyTVIql1KAyK5UfY/sKMDj2e2MEbC8FAvzmrFQjBGzviCWzIJeRN5LWlMlsx0rI9ingbALyCdAv6duUFLA9E7gJ9CYAz0gaKgM+vnfaGdxqrO1VwHVgde7cX3HVH7Wao9Xx2krIdljxq8CsHMRrYK+kD63gihyvRcD2OeBEAuC+pP4iYEXPqVTA9lzgDrA9AXBUUrhpVRqVCdheB9wGluQIvwJ7JL2olDxOVolAbAluJACfAbsk/agDPszZtoDta8ChBOB5SSfrAm/7b9T2IuAeELrJbPwBdkt6WDd86QzY3hrh5+Ug3wE9kj52Ar6UgO3jwIUE4ANJfZ0CL1VCttcDzxOQhyWFm1bHY0Kb2PZK4G2CclBS2MwdjwkJBLp/lFDld9kiqzFhgSixBbgLzM9dJGQnbOLPRS5exTmlBKLEwiixKQfyG9gp6WkVgK3mKC0wNrHtS8CRxIVGJA23Amj3eNsCMRuhwwwllY+QhV5Jof+vJSoRiBJrYzO3LEf6Jd6ZX9VhUJlAlJgDjIY9kIAdkBS61UqjUoHMvgjPuSMJ0lFJqcavtFQtAjEbPcAtYHaO7iWwT9Kn0tSZgbUJRIkV8aE+7I9s/AT6JIVXKm1FrQJRYkZ8mXUgQTosKVVqhaVqF8jsi2PAxQTZY2C/pO+FqTtVQnkg29viq5bwMJSN95KWT3mBWFKLY0mFfmo8GvFyNwucb0EaJxCzMRCzMb2RAlEifFoaauQnpjKbNj+mY3+jVcCm5ugK1LWyReftZqDoStV13l9yKLox+oeTIQAAAABJRU5ErkJggg==";const n=t=>((0,o.dD)("data-v-e425130a"),t=t(),(0,o.Cn)(),t),s={class:"nav-bar"},d=n((()=>(0,o._)("img",{src:l,alt:""},null,-1))),i={class:"center"},r=(0,o.Uk)("EWShop"),c={class:"right"};function u(t,e,a,l,n,u){return(0,o.wg)(),(0,o.iD)("div",s,[(0,o._)("div",{class:"left",onClick:e[0]||(e[0]=(...t)=>l.goback&&l.goback(...t))},[(0,o.WI)(t.$slots,"left",{},(()=>[d]),!0)]),(0,o._)("div",i,[(0,o.WI)(t.$slots,"default",{},(()=>[r]),!0)]),(0,o._)("div",c,[(0,o.WI)(t.$slots,"right",{},void 0,!0)])])}var p=a(2119),g={name:"NavBar",setup(){const t=(0,p.tv)(),e=()=>{t.go(-1)};return{goback:e}}},v=a(3744);const A=(0,v.Z)(g,[["render",u],["__scopeId","data-v-e425130a"]]);var m=A},5028:function(t,e,a){a.d(e,{Z:function(){return h}});var o=a(6252);const l={class:"goods"};function n(t,e,a,n,s,d){const i=(0,o.up)("goods-list-item");return(0,o.wg)(),(0,o.iD)("div",l,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.goods,(t=>((0,o.wg)(),(0,o.j4)(i,{product:t,key:t},null,8,["product"])))),128))])}var s=a(3577);const d=t=>((0,o.dD)("data-v-2ca3dc36"),t=t(),(0,o.Cn)(),t),i={alt:""},r={class:"goods-info"},c={class:"price"},u=d((()=>(0,o._)("small",null,"￥",-1))),p={class:"collect"};function g(t,e,a,l,n,d){const g=(0,o.Q2)("lazy");return(0,o.wg)(),(0,o.iD)("div",{class:"goods-item",onClick:e[0]||(e[0]=(...t)=>l.itemClick&&l.itemClick(...t))},[(0,o.wy)((0,o._)("img",i,null,512),[[g,a.product.cover_url]]),(0,o._)("div",r,[(0,o._)("p",null,(0,s.zw)(a.product.title),1),(0,o._)("span",c,[u,(0,o.Uk)((0,s.zw)(a.product.price),1)]),(0,o._)("span",p,(0,s.zw)(a.product.collects_count),1)])])}var v=a(2119),A={name:"GoodsListItem",props:{product:{type:Object,default(){return{}}}},setup(t){const e=(0,v.tv)();return{itemClick:()=>{e.push({path:"/detail",query:{id:t.product.id}})}}}},m=a(3744);const f=(0,m.Z)(A,[["render",g],["__scopeId","data-v-2ca3dc36"]]);var w=f,k={name:"GoodsList",components:{GoodsListItem:w},props:{goods:{type:Array,default(){return[]}}}};const C=(0,m.Z)(k,[["render",n],["__scopeId","data-v-891873b0"]]);var h=C},4029:function(t,e,a){a.r(e),a.d(e,{default:function(){return b}});var o=a(6252),l=a(3577);const n=(0,o.Uk)("新书"),s=(0,o.Uk)("推荐"),d=(0,o.Uk)("加入购物车"),i=(0,o.Uk)("立即购买"),r=["innerHTML"];function c(t,e,a,c,u,p){const g=(0,o.up)("nav-bar"),v=(0,o.up)("van-image"),A=(0,o.up)("van-tag"),m=(0,o.up)("van-button"),f=(0,o.up)("van-card"),w=(0,o.up)("van-tab"),k=(0,o.up)("goods-list"),C=(0,o.up)("van-tabs");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[(0,o.Uk)("商品详情:"+(0,l.zw)(c.id),1)])),_:1}),(0,o.Wm)(v,{style:{"margin-top":"50px"},width:"100%","lazy-load":"",src:t.detail.cover_url},null,8,["src"]),(0,o.Wm)(f,{style:{"text-align":"left"},num:t.detail.stock,price:t.detail.price+".00",desc:t.detail.description,title:t.detail.title},{tags:(0,o.w5)((()=>[(0,o.Wm)(A,{plain:"",type:"danger"},{default:(0,o.w5)((()=>[n])),_:1}),(0,o.Wm)(A,{plain:"",type:"danger"},{default:(0,o.w5)((()=>[s])),_:1})])),footer:(0,o.w5)((()=>[(0,o.Wm)(m,{round:"",type:"warning",onClick:c.handleAddCart},{default:(0,o.w5)((()=>[d])),_:1},8,["onClick"]),(0,o.Wm)(m,{round:"",type:"danger",onClick:c.goToCart},{default:(0,o.w5)((()=>[i])),_:1},8,["onClick"])])),_:1},8,["num","price","desc","title"]),(0,o.Wm)(C,{active:c.active,"onUpdate:active":e[0]||(e[0]=t=>c.active=t)},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{title:"概述"},{default:(0,o.w5)((()=>[(0,o._)("div",{class:"content",innerHTML:t.detail.details},null,8,r)])),_:1}),(0,o.Wm)(w,{title:"热评"}),(0,o.Wm)(w,{title:"相关图书"},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{goods:t.like_goods},null,8,["goods"])])),_:1})])),_:1},8,["active"])])}a(5986);var u=a(968),p=a(3080),g=a(5028),v=a(2119),A=a(3907),m=a(2262),f=a(7707);function w(t){return(0,f.W)({url:"/api/goods/"+t,method:"get"})}var k=a(9862),C={name:"Detail",components:{NavBar:p.Z,GoodsList:g.Z},setup(){let t=(0,m.iH)(0);const e=(0,v.yj)(),a=(0,v.tv)(),l=(0,A.oR)();let n=(0,m.iH)("id"),s=(0,m.qj)({detail:{},like_goods:[]});(0,o.bv)((()=>{n.value=e.query.id,w(n.value).then((t=>{s.detail=t.goods,s.like_goods=t.like_goods,console.log(t)}))}));const d=()=>{(0,k.Z5)({goods_id:s.detail.id,query:{num:1}}).then((t=>{"201"!=t.status&&"204"!=t.status||(u.Z.success("添加购物车成功"),l.dispatch("updateCart"))}))},i=()=>{(0,k.Z5)({goods_id:s.detail.id,query:{num:1}}).then((t=>{"201"!=t.status&&"204"!=t.status||(u.Z.success("添加购物车成功,请去购物车支付"),l.dispatch("updateCart"),a.push({path:"/shopcart"}))}))};return{id:n,...(0,m.BK)(s),active:t,handleAddCart:d,goToCart:i}}},h=a(3744);const _=(0,h.Z)(C,[["render",c]]);var b=_}}]);
//# sourceMappingURL=29.a896a81c.js.map