"use strict";(self["webpackChunkewshop"]=self["webpackChunkewshop"]||[]).push([[296],{5028:function(e,o,t){t.d(o,{Z:function(){return _}});var n=t(6252);const l={class:"goods"};function s(e,o,t,s,a,r){const c=(0,n.up)("goods-list-item");return(0,n.wg)(),(0,n.iD)("div",l,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.goods,(e=>((0,n.wg)(),(0,n.j4)(c,{product:e,key:e},null,8,["product"])))),128))])}var a=t(3577);const r=e=>((0,n.dD)("data-v-2ca3dc36"),e=e(),(0,n.Cn)(),e),c={alt:""},i={class:"goods-info"},u={class:"price"},d=r((()=>(0,n._)("small",null,"￥",-1))),p={class:"collect"};function m(e,o,t,l,s,r){const m=(0,n.Q2)("lazy");return(0,n.wg)(),(0,n.iD)("div",{class:"goods-item",onClick:o[0]||(o[0]=(...e)=>l.itemClick&&l.itemClick(...e))},[(0,n.wy)((0,n._)("img",c,null,512),[[m,t.product.cover_url]]),(0,n._)("div",i,[(0,n._)("p",null,(0,a.zw)(t.product.title),1),(0,n._)("span",u,[d,(0,n.Uk)((0,a.zw)(t.product.price),1)]),(0,n._)("span",p,(0,a.zw)(t.product.collects_count),1)])])}var v=t(2119),g={name:"GoodsListItem",props:{product:{type:Object,default(){return{}}}},setup(e){const o=(0,v.tv)();return{itemClick:()=>{o.push({path:"/detail",query:{id:e.product.id}})}}}},w=t(3744);const f=(0,w.Z)(g,[["render",m],["__scopeId","data-v-2ca3dc36"]]);var b=f,k={name:"GoodsList",components:{GoodsListItem:b},props:{goods:{type:Array,default(){return[]}}}};const h=(0,w.Z)(k,[["render",s],["__scopeId","data-v-891873b0"]]);var _=h},8483:function(e,o,t){t.r(o),t.d(o,{default:function(){return x}});var n=t(6252),l=t(9963);const s={id:"home"},a=(0,n.Uk)("图书商城"),r={class:"wrapper"},c={class:"content"},i={ref:"banref"};function u(e,o,t,u,d,p){const m=(0,n.up)("nav-bar"),v=(0,n.up)("tab-control"),g=(0,n.up)("home-swiper"),w=(0,n.up)("recommend-view"),f=(0,n.up)("goods-list"),b=(0,n.up)("back-top");return(0,n.wg)(),(0,n.iD)("div",s,[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[a])),_:1}),(0,n.wy)((0,n.Wm)(v,{onTabClick:u.tabClick,titles:["畅销","新书","精选"]},null,8,["onTabClick"]),[[l.F8,u.isTabFixed]]),(0,n._)("div",r,[(0,n._)("div",c,[(0,n._)("div",i,[(0,n.Wm)(g,{banners:u.banners},null,8,["banners"]),(0,n.Wm)(w,{recommends:u.recommends},null,8,["recommends"])],512),(0,n.Wm)(v,{onTabClick:u.tabClick,titles:["畅销","新书","精选"]},null,8,["onTabClick"]),(0,n.Wm)(f,{goods:u.showGoods},null,8,["goods"])])]),(0,n.wy)((0,n.Wm)(b,{onBTop:u.bTop},null,8,["onBTop"]),[[l.F8,u.isShowBackTop]])])}var d=t(3080),p=t(3577);const m={class:"recommend"},v=["onClick"],g={alt:""};function w(e,o,t,s,a,r){const c=(0,n.Q2)("lazy");return(0,n.wg)(),(0,n.iD)("div",m,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.recommends.slice(0,4),(e=>((0,n.wg)(),(0,n.iD)("div",{class:"recommend-item",key:e.id},[(0,n._)("a",{href:"",onClick:(0,l.iM)((o=>s.goDetail(e.id)),["prevent"])},[(0,n.wy)((0,n._)("img",g,null,512),[[c,e.cover_url]]),(0,n._)("div",null,(0,p.zw)(e.title),1)],8,v)])))),128))])}var f=t(2119),b={name:"RecommendView",props:{recommends:{type:Array,default(){return[]}}},setup(){const e=(0,f.tv)(),o=o=>{e.push({path:"/detail",query:{id:o}})};return{goDetail:o}}},k=t(3744);const h=(0,k.Z)(b,[["render",w],["__scopeId","data-v-aa1742b0"]]);var _=h;const y={class:"tab-control"},C=["onClick"];function H(e,o,t,l,s,a){return(0,n.wg)(),(0,n.iD)("div",y,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.titles,((e,o)=>((0,n.wg)(),(0,n.iD)("div",{key:o,onClick:e=>l.itemClick(o),class:(0,p.C_)(["tab-control-item",{active:l.currentIndex==o}])},[(0,n._)("span",null,(0,p.zw)(e),1)],10,C)))),128))])}var T=t(2262),D={name:"TabControl",props:{titles:{type:Array,default(){return[]}}},setup(e,{emit:o}){let t=(0,T.iH)(0);const n=e=>{t.value=e,o("tabClick",e)};return{currentIndex:t,itemClick:n}}};const Z=(0,k.Z)(D,[["render",H],["__scopeId","data-v-e2af481e"]]);var I=Z,q=t(5028),z=t(5109),S=t(2840);const W={alt:""};function Y(e,o,t,l,s,a){const r=(0,n.up)("van-swipe-item"),c=(0,n.up)("van-swipe"),i=(0,n.Q2)("lazy");return(0,n.wg)(),(0,n.iD)("div",null,[t.banners.length?((0,n.wg)(),(0,n.j4)(c,{key:0,class:"my-swipe",autoplay:3e3,"indicator-color":"white"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.banners,((e,o)=>((0,n.wg)(),(0,n.j4)(r,{key:o},{default:(0,n.w5)((()=>[(0,n.wy)((0,n._)("img",W,null,512),[[i,e.img_url]])])),_:2},1024)))),128))])),_:1})):(0,n.kq)("",!0)])}var j={name:"HomeSwiper",props:{banners:Array,default(){return[]}}};const B=(0,k.Z)(j,[["render",Y],["__scopeId","data-v-43b07f6c"]]);var G=B,F=t(1492),L={name:"Home",setup(){let e=(0,T.iH)(!1),o=(0,T.iH)(!1),t=(0,T.iH)(null);const l=(0,T.iH)([]),s=(0,T.qj)({sales:{page:1,list:[]},recommend:{page:1,list:[]},new:{page:1,list:[]}});let a=(0,T.iH)("sales");const r=(0,n.Fl)((()=>s[a.value].list));let c=(0,T.qj)({}),i=(0,T.iH)([]);(0,n.bv)((()=>{(0,F.Y)().then((e=>{l.value=e.goods.data,i.value=e.slides})),(0,F.r)("sales").then((e=>{s.sales.list=e.goods.data})),(0,F.r)("recommend").then((e=>{s.recommend.list=e.goods.data})),(0,F.r)("new").then((e=>{s.new.list=e.goods.data})),c=new z.ZP(document.querySelector(".wrapper"),{probeType:3,click:!0,pullUpLoad:!0}),c.on("scroll",(n=>{console.log(t.value.offsetHeight),console.log(-n.y),o.value=e.value=-n.y>t.value.offsetHeight})),c.on("pullingUp",(()=>{console.log("上拉加载更多。。。"),console.log("contentHeight"+document.querySelector(".content").clientHeight);const e=s[a.value].page+1;(0,F.r)(a.value,e).then((e=>{s[a.value].list.push(...e.goods.data),s[a.value].page+=1})),c.finishPullUp(),c.refresh(),console.log("contentHeight"+document.querySelector(".content").clientHeight),console.log("当前类型"+a.value+", 当前页："+e)}))}));const u=e=>{let o=["sales","new","recommend"];a.value=o[e],(0,n.Y3)((()=>{c&&c.refresh()}))};(0,n.m0)((()=>{(0,n.Y3)((()=>{c&&c.refresh()}))}));const d=()=>{c.scrollTo(0,0,500)};return{recommends:l,tabClick:u,goods:s,showGoods:r,isTabFixed:e,banref:t,isShowBackTop:o,bTop:d,banners:i}},components:{NavBar:d.Z,RecommendView:_,TabControl:I,GoodsList:q.Z,BackTop:S.Z,HomeSwiper:G}};const U=(0,k.Z)(L,[["render",u],["__scopeId","data-v-0d5ffc08"]]);var x=U}}]);
//# sourceMappingURL=296.ed884aa0.js.map