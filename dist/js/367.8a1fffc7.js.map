{"version":3,"file":"js/367.8a1fffc7.js","mappings":"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","sources":["webpack://ewshop/./src/network/user.js","webpack://ewshop/./src/components/common/navbar/NavBar.vue","webpack://ewshop/./src/components/common/navbar/NavBar.vue?c028","webpack://ewshop/./src/views/profile/Login.vue","webpack://ewshop/./src/views/profile/Login.vue?fc56"],"sourcesContent":["import {request} from './request'\r\n\r\nexport function register(data){\r\n    return request({\r\n        url:'/api/auth/register',\r\n        method: 'post',\r\n        data,\r\n    })\r\n}\r\n\r\nexport function login(data){\r\n    return request({\r\n        url:'/api/auth/login',\r\n        method: 'post',\r\n        data,\r\n    })\r\n}\r\n\r\nexport function logout(){\r\n    return request({\r\n        url:'/api/auth/logout',\r\n        method: 'post',\r\n    })\r\n}","<template>\r\n  <div class=\"nav-bar\">\r\n    <div class=\"left\" @click=\"goback\"><slot name=\"left\">\r\n      <img src=\"~assets/images/left.png\" alt=\"\">\r\n    </slot></div>\r\n    <div class=\"center\"><slot>EWShop</slot></div>\r\n    <div class=\"right\"><slot name=\"right\"></slot></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {useRouter} from 'vue-router'\r\n\r\nexport default {\r\n  name: \"NavBar\",\r\n\r\n  setup(){\r\n    const router = useRouter();\r\n\r\n    const goback = ()=>{\r\n      router.go(-1);  // 回到上一个页面\r\n    }\r\n\r\n    return{\r\n      goback,\r\n    }\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.nav-bar{\r\n  display: flex;  /* 弹性盒布局 */\r\n  background: var(--color-tint);\r\n  color: #FFFFFF;\r\n  position: fixed;  /* 位置固定 */\r\n  left: 0;\r\n  right: 0;\r\n  top: 0;\r\n  z-index: 9;  /* 堆叠顺序，高堆叠顺序避免其被遮挡 */\r\n  height: 45px;\r\n  line-height: 45px;  /* 行高 */\r\n  text-align: center;  /* 文本居中 */\r\n  box-shadow: 0 2px 0 rgba(100, 100, 100, 0.1);\r\n}\r\n\r\n.left, .right{\r\n  width: 60px;\r\n}\r\n.left img{  /* left 类中的 img */\r\n  width: 45px;\r\n  padding: 12px;\r\n}\r\n.center{\r\n  flex: 1;  /* 中间占满整部分区域 */\r\n}\r\n\r\n</style>","import { render } from \"./NavBar.vue?vue&type=template&id=e425130a&scoped=true\"\nimport script from \"./NavBar.vue?vue&type=script&lang=js\"\nexport * from \"./NavBar.vue?vue&type=script&lang=js\"\n\nimport \"./NavBar.vue?vue&type=style&index=0&id=e425130a&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\1Master\\\\work\\\\前端\\\\Vue高洛峰\\\\myproject\\\\vueproject\\\\ewshop\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-e425130a\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n\r\n    <nav-bar>\r\n      <template v-slot:default>用户登录</template>\r\n    </nav-bar>\r\n\r\n    <div style=\"margin-top: 50px\">\r\n      <div style=\"text-align: center; padding-top: 30px\">\r\n\r\n        <van-image\r\n            width=\"10rem\"\r\n            height=\"10rem\"\r\n            fit=\"contain\"\r\n            src=\"https://cdn.jsdelivr.net/npm/@vant/assets/cat.jpeg\"\r\n        />\r\n      </div>\r\n    </div>\r\n\r\n    <van-form @submit=\"onSubmit\">\r\n      <van-cell-group inset>\r\n        <van-field\r\n            v-model=\"email\"\r\n            name=\"email\"\r\n            label=\"email\"\r\n            placeholder=\"email\"\r\n            :rules=\"[{ required: true, message: '请填写email' }]\"\r\n        />\r\n        <van-field\r\n            v-model=\"password\"\r\n            type=\"password\"\r\n            name=\"密码\"\r\n            label=\"密码\"\r\n            placeholder=\"密码\"\r\n            :rules=\"[{ required: true, message: '请填写密码' }]\"\r\n        />\r\n\r\n      </van-cell-group>\r\n      <div style=\"margin: 16px;\">\r\n\r\n        <div class=\"link-login\" @click=\"$router.push({path: '/register'})\">\r\n          还没有账号，立即注册\r\n        </div>\r\n\r\n        <van-button round block type=\"primary\" native-type=\"submit\">\r\n          提交\r\n        </van-button>\r\n      </div>\r\n    </van-form>\r\n\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport NavBar from \"components/common/navbar/NavBar\";\r\nimport {ref, reactive, toRefs} from \"vue\";\r\nimport {login} from \"@/network/user\";\r\nimport { Toast } from 'vant';\r\nimport {useRouter} from \"vue-router\";\r\nimport {useStore} from 'vuex';\r\n\r\nexport default {\r\n  name: \"Login\",\r\n  components:{\r\n    NavBar,\r\n  },\r\n  setup(){\r\n    const userinfo = reactive({\r\n      email: '',\r\n      password: '',\r\n    })\r\n\r\n    const router = useRouter();\r\n    const store = useStore();\r\n\r\n    const onSubmit = () => {\r\n      login(userinfo).then(res=>{\r\n        // 将 Token 保存在本地 window.localStorage\r\n        // setItem(key, value)---存到本地   getItem(key)---从本地获取\r\n        window.localStorage.setItem('token', res.access_token);\r\n        // 可以在 vuex 中定义一个 islogin 从本地获取token，每次判断其真假\r\n        store.commit('setIsLogin', true);\r\n\r\n\r\n        Toast.success('登陆成功');\r\n        userinfo.email = '';\r\n        userinfo.password = '';\r\n\r\n        setTimeout(()=>{\r\n          router.go(-1);\r\n        },500)\r\n\r\n\r\n      })\r\n    }\r\n\r\n\r\n    return{\r\n      ...toRefs(userinfo),\r\n      onSubmit,\r\n    }\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.link-login{\r\n  font-size: 14px;\r\n  margin-bottom: 20px;\r\n  color: #42b983;\r\n  display: block;\r\n  text-align: left;\r\n}\r\n\r\n</style>","import { render } from \"./Login.vue?vue&type=template&id=257d0a76&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=257d0a76&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\1Master\\\\work\\\\前端\\\\Vue高洛峰\\\\myproject\\\\vueproject\\\\ewshop\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-257d0a76\"]])\n\nexport default __exports__"],"names":["register","data","request","url","method","login","logout","class","_createElementVNode","src","_imports_0","alt","_createElementBlock","onClick","$setup","_renderSlot","_ctx","_hoisted_2","undefined","name","setup","router","useRouter","goback","go","__exports__","render","style","_createVNode","_component_nav_bar","default","_component_van_image","width","height","fit","_component_van_form","onSubmit","_component_van_cell_group","inset","_component_van_field","$event","label","placeholder","rules","required","message","type","push","path","_component_van_button","round","block","components","NavBar","userinfo","reactive","email","password","store","useStore","then","res","window","localStorage","setItem","access_token","commit","setTimeout","toRefs"],"sourceRoot":""}