{"version":3,"file":"js/29.a896a81c.js","mappings":"swCACOA,MAAM,W,UAEPC,EAAAA,EAAAA,GAA0C,OAArCC,IAAAC,EAA8BC,IAAI,IAAvC,W,GAEGJ,MAAM,U,WAAe,U,GACrBA,MAAM,S,0CALbK,EAAAA,EAAAA,IAMM,MANN,EAMM,EALJJ,EAAAA,EAAAA,GAEa,OAFRD,MAAM,OAAQM,QAAK,oBAAEC,EAAAA,QAAAA,EAAAA,UAAAA,KAA1B,EAAkCC,EAAAA,EAAAA,IAE3BC,EAAAA,OAAA,WAF2B,IAE3B,CADLC,KADgC,MAGlCT,EAAAA,EAAAA,GAA6C,MAA7C,EAA6C,EAAzBO,EAAAA,EAAAA,IAAmBC,EAAAA,OAAA,cAAnB,IAAmB,MAAnB,MACpBR,EAAAA,EAAAA,GAAmD,MAAnD,EAAmD,EAAhCO,EAAAA,EAAAA,IAA0BC,EAAAA,OAAA,gBAAAE,GAAA,O,cAOjD,GACEC,KAAM,SAENC,QACE,MAAMC,GAASC,EAAAA,EAAAA,MAETC,EAAS,KACbF,EAAOG,IAAI,IAGb,MAAM,CACJD,OAAAA,K,UCjBN,MAAME,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,S,4ECRKnB,MAAM,S,8EAAXK,EAAAA,EAAAA,IAKM,MALN,EAKM,gBAHJA,EAAAA,EAAAA,IAAqFe,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAArDC,EAAAA,OAARC,K,WAAxBC,EAAAA,EAAAA,IAAqFC,EAAA,CAA7CC,QAASH,EAAOI,IAAKJ,GAA7D,+B,6ECSgCnB,IAAI,I,GAC/BJ,MAAM,c,GAEHA,MAAM,S,UAAQC,EAAAA,EAAAA,GAAgB,aAAT,KAAC,K,GACtBD,MAAM,W,mEAfhBK,EAAAA,EAAAA,IAkBM,OAlBDL,MAAM,aAAcM,QAAK,oBAAEC,EAAAA,WAAAA,EAAAA,aAAAA,KAAhC,WAWEN,EAAAA,EAAAA,GAAuC,MAAvC,EAAuC,cAA1BqB,EAAAA,QAAQM,cACrB3B,EAAAA,EAAAA,GAIM,MAJN,EAIM,EAHJA,EAAAA,EAAAA,GAAwB,UAAA4B,EAAAA,EAAAA,IAAnBP,EAAAA,QAAQQ,OAAK,IAClB7B,EAAAA,EAAAA,GAA4D,OAA5D,EAA4D,CAAxC8B,GAAwC,iBAAtBT,EAAAA,QAAQU,OAAK,MACnD/B,EAAAA,EAAAA,GAAuD,OAAvD,GAAuD4B,EAAAA,EAAAA,IAA/BP,EAAAA,QAAQW,gBAAc,O,cASlD,GACErB,KAAM,gBACNsB,MAAM,CACJR,QAAS,CACPS,KAAMC,OACNC,UACE,MAAO,MAIbxB,MAAMqB,GACJ,MAAMpB,GAASC,EAAAA,EAAAA,MAEf,MAAO,CACLuB,UAAW,KACTxB,EAAOyB,KAAK,CAACC,KAAK,UAAWC,MAAM,CAACC,GAAGR,EAAMR,QAAQgB,U,UCjC7D,MAAMxB,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAAS,GAAQ,CAAC,YAAY,qBAEzF,QFGA,GACEN,KAAM,YACN+B,WAAW,CACTC,cAAAA,GAEFV,MAAM,CACJW,MAAO,CACLV,KAAMW,MACNT,UACE,MAAO,OGdf,MAAM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASlB,GAAQ,CAAC,YAAY,qBAEzF,S,2GCWqC,M,WACA,M,WAG2B,S,WACN,Q,0PAxBxDd,EAAAA,EAAAA,IA0CM,aAzCJ0C,EAAAA,EAAAA,IAEUC,EAAA,MADSX,SAAO,SAAC,IAAK,UAAL,SAAKR,EAAAA,EAAAA,IAAEtB,EAAAA,IAAE,M,OAIpCwC,EAAAA,EAAAA,IAIEE,EAAA,CAJSC,MAAA,sBACPC,MAAM,OACN,eACCjD,IAAKO,EAAAA,OAAOmB,WAHjB,iBAMAmB,EAAAA,EAAAA,IAcWK,EAAA,CAdDF,MAAA,sBACLG,IAAK5C,EAAAA,OAAO6C,MACZtB,MAAOvB,EAAAA,OAAOuB,MAAK,MACnBuB,KAAM9C,EAAAA,OAAO+C,YACb1B,MAAOrB,EAAAA,OAAOqB,OAJnB,CAMa2B,MAAI,SACb,IAAyC,EAAzCV,EAAAA,EAAAA,IAAyCW,EAAA,CAAhCC,MAAA,GAAMxB,KAAK,UAApB,C,kBAA6B,IAAE,M,OAC/BY,EAAAA,EAAAA,IAAyCW,EAAA,CAAhCC,MAAA,GAAMxB,KAAK,UAApB,C,kBAA6B,IAAE,M,SAEtByB,QAAM,SACf,IAA0E,EAA1Eb,EAAAA,EAAAA,IAA0Ec,EAAA,CAA9DC,MAAA,GAAM3B,KAAK,UAAW7B,QAAOC,EAAAA,eAAzC,C,kBAAwD,IAAK,M,KAA7D,gBACAwC,EAAAA,EAAAA,IAAmEc,EAAA,CAAvDC,MAAA,GAAM3B,KAAK,SAAU7B,QAAOC,EAAAA,UAAxC,C,kBAAkD,IAAI,M,KAAtD,kB,KAZJ,mCAgBAwC,EAAAA,EAAAA,IAUWgB,EAAA,CAVOC,OAAQzD,EAAAA,O,iCAAAA,EAAAA,OAAM0D,IAAhC,C,kBACE,IAIU,EAJVlB,EAAAA,EAAAA,IAIUmB,EAAA,CAJDpC,MAAM,MAAI,C,kBACjB,IAEM,EAFN7B,EAAAA,EAAAA,GAEM,OAFDD,MAAM,UACNmE,UAAQ1D,EAAAA,OAAO2D,SADpB,a,OAIFrB,EAAAA,EAAAA,IAA8BmB,EAAA,CAArBpC,MAAM,QACfiB,EAAAA,EAAAA,IAEUmB,EAAA,CAFDpC,MAAM,QAAM,C,kBACnB,IAA6C,EAA7CiB,EAAAA,EAAAA,IAA6CsB,EAAA,CAAhCxB,MAAOpC,EAAAA,YAAU,qB,cARlC,gB,iFC3BG,SAAS6D,EAAU5B,GACtB,OAAO6B,EAAAA,EAAAA,GAAQ,CACXC,IAAK,cAAc9B,EACnB+B,OAAQ,Q,cDoDhB,GACE7D,KAAM,SACN+B,WAAW,CACT+B,OADS,IAETC,UAAAA,EAAAA,GAEF9D,QAEE,IAAImD,GAASY,EAAAA,EAAAA,IAAI,GAEjB,MAAMC,GAAQC,EAAAA,EAAAA,MACRhE,GAASC,EAAAA,EAAAA,MACTgE,GAAQC,EAAAA,EAAAA,MAEd,IAAItC,GAAKkC,EAAAA,EAAAA,IAAI,MAETK,GAAOC,EAAAA,EAAAA,IAAS,CAClBC,OAAO,GACPC,WAAW,MAIbC,EAAAA,EAAAA,KAAU,KACR3C,EAAG4C,MAAQT,EAAMpC,MAAMC,GAEvB4B,EAAU5B,EAAG4C,OAAOC,MAAKC,IACvBP,EAAKE,OAASK,EAAI3C,MAClBoC,EAAKG,WAAaI,EAAIJ,WACtBK,QAAQC,IAAIF,SAKhB,MAAMG,EAAgB,MAEpBC,EAAAA,EAAAA,IAAQ,CAACC,SAAUZ,EAAKE,OAAOzC,GAAID,MAAM,CAACY,IAAI,KAAKkC,MAAKC,IACrC,OAAdA,EAAIM,QAAiC,OAAdN,EAAIM,SAC5B,YAAc,WAEdf,EAAMgB,SAAS,mBAMfC,EAAW,MAEfJ,EAAAA,EAAAA,IAAQ,CAACC,SAAUZ,EAAKE,OAAOzC,GAAID,MAAM,CAACY,IAAI,KAAKkC,MAAKC,IACrC,OAAdA,EAAIM,QAAiC,OAAdN,EAAIM,SAC5B,YAAc,mBACdf,EAAMgB,SAAS,cACfjF,EAAOyB,KAAK,CAACC,KAAK,mBAMxB,MAAM,CACJE,GAAAA,MACGuD,EAAAA,EAAAA,IAAOhB,GACVjB,OAAAA,EACA2B,cAAAA,EACAK,SAAAA,K,UEhHN,MAAM9E,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE","sources":["webpack://ewshop/./src/components/common/navbar/NavBar.vue","webpack://ewshop/./src/components/common/navbar/NavBar.vue?c028","webpack://ewshop/./src/components/content/goods/GoodsList.vue","webpack://ewshop/./src/components/content/goods/GoodsListItem.vue","webpack://ewshop/./src/components/content/goods/GoodsListItem.vue?b4c2","webpack://ewshop/./src/components/content/goods/GoodsList.vue?edb4","webpack://ewshop/./src/views/detail/Detail.vue","webpack://ewshop/./src/network/detail.js","webpack://ewshop/./src/views/detail/Detail.vue?6711"],"sourcesContent":["<template>\r\n  <div class=\"nav-bar\">\r\n    <div class=\"left\" @click=\"goback\"><slot name=\"left\">\r\n      <img src=\"~assets/images/left.png\" alt=\"\">\r\n    </slot></div>\r\n    <div class=\"center\"><slot>EWShop</slot></div>\r\n    <div class=\"right\"><slot name=\"right\"></slot></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {useRouter} from 'vue-router'\r\n\r\nexport default {\r\n  name: \"NavBar\",\r\n\r\n  setup(){\r\n    const router = useRouter();\r\n\r\n    const goback = ()=>{\r\n      router.go(-1);  // 回到上一个页面\r\n    }\r\n\r\n    return{\r\n      goback,\r\n    }\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.nav-bar{\r\n  display: flex;  /* 弹性盒布局 */\r\n  background: var(--color-tint);\r\n  color: #FFFFFF;\r\n  position: fixed;  /* 位置固定 */\r\n  left: 0;\r\n  right: 0;\r\n  top: 0;\r\n  z-index: 9;  /* 堆叠顺序，高堆叠顺序避免其被遮挡 */\r\n  height: 45px;\r\n  line-height: 45px;  /* 行高 */\r\n  text-align: center;  /* 文本居中 */\r\n  box-shadow: 0 2px 0 rgba(100, 100, 100, 0.1);\r\n}\r\n\r\n.left, .right{\r\n  width: 60px;\r\n}\r\n.left img{  /* left 类中的 img */\r\n  width: 45px;\r\n  padding: 12px;\r\n}\r\n.center{\r\n  flex: 1;  /* 中间占满整部分区域 */\r\n}\r\n\r\n</style>","import { render } from \"./NavBar.vue?vue&type=template&id=e425130a&scoped=true\"\nimport script from \"./NavBar.vue?vue&type=script&lang=js\"\nexport * from \"./NavBar.vue?vue&type=script&lang=js\"\n\nimport \"./NavBar.vue?vue&type=style&index=0&id=e425130a&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\1Master\\\\work\\\\前端\\\\Vue高洛峰\\\\myproject\\\\vueproject\\\\ewshop\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-e425130a\"]])\n\nexport default __exports__","<template>\r\n<div class=\"goods\">\r\n\r\n  <goods-list-item v-for=\"item in goods\" :product=\"item\" :key=\"item\"></goods-list-item>\r\n\r\n\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport GoodsListItem from \"@/components/content/goods/GoodsListItem\";\r\n\r\nexport default {\r\n  name: \"GoodsList\",\r\n  components:{\r\n    GoodsListItem,\r\n  },\r\n  props:{\r\n    goods: {\r\n      type: Array,\r\n      default(){\r\n        return []\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n.goods{\r\n  display: flex;  /*弹性盒布局，默认全放在一行*/\r\n  flex-wrap: wrap;  /*摆放不下时自动换行*/\r\n  justify-content: space-around;\r\n  padding: 5px;\r\n}\r\n\r\n\r\n</style>","<template>\r\n<div class=\"goods-item\" @click=\"itemClick\">\r\n\r\n<!--  <img src=\"~assets/images/围城.png\" alt=\"\">-->\r\n<!--  <div class=\"goods-info\">-->\r\n<!--    <p>标题</p>-->\r\n<!--    <span class=\"price\"><small>￥</small>100</span>-->\r\n<!--    <span class=\"collect\">33</span>-->\r\n<!--  </div>-->\r\n\r\n\r\n<!--  <img :src=\"product.cover_url\" alt=\"\">-->\r\n  <img v-lazy=\"product.cover_url\" alt=\"\">\r\n  <div class=\"goods-info\">\r\n    <p>{{product.title}}</p>\r\n    <span class=\"price\"><small>￥</small>{{product.price}}</span>\r\n    <span class=\"collect\">{{product.collects_count}}</span>\r\n  </div>\r\n  \r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport {useRouter} from \"vue-router\";\r\n\r\nexport default {\r\n  name: \"GoodsListItem\",\r\n  props:{\r\n    product: {\r\n      type: Object,\r\n      default(){\r\n        return {}\r\n      }\r\n    }\r\n  },\r\n  setup(props){  // setup也可以传属性，使用时直接 props.product.xx\r\n    const router = useRouter();\r\n\r\n    return {\r\n      itemClick: ()=>{\r\n        router.push({path:'/detail', query:{id:props.product.id}})\r\n      },\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n.goods-item {\r\n  width: 46%;  /*一行中放 2 个书，中间有 8% 空隙*/\r\n  padding-bottom: 40px;\r\n  position: relative;  /*相对位置*/\r\n\r\n  img {\r\n    width: 100%;\r\n    height: 150px;\r\n    border-radius: 5px;  /*加圆角*/\r\n  }\r\n\r\n  .goods-info{\r\n    font-size: 12px;\r\n    position: absolute;  /*绝对位置*/\r\n    bottom: 5px;\r\n    left: 0;\r\n    right: 0;\r\n    overflow: hidden;  /*超出盒子时，隐藏*/\r\n    text-align: center;\r\n    p{\r\n      overflow: hidden;  /*标题很长时，隐藏*/\r\n      text-overflow: ellipsis;  /*并且超出时出现 ... 的缩放*/\r\n      white-space: nowrap;  /*空白处 不交换*/\r\n      margin-bottom: 3px;\r\n    }\r\n\r\n    .price{\r\n      color: red;\r\n      margin-right: 20px;\r\n    }\r\n\r\n    .collect{\r\n      position: relative;\r\n    }\r\n    .collect::before{  /*collect类的前面  使用伪元素*/\r\n      content: '';  /*无内容*/\r\n      position: absolute;\r\n      left: -15px;\r\n      width: 14px;\r\n      height: 14px;\r\n      top: -1px;\r\n      background: url(\"~assets/images/collect.png\") 0 0/14px 14px;  /*加图片*/\r\n    }\r\n\r\n  }\r\n\r\n\r\n}\r\n\r\n</style>","import { render } from \"./GoodsListItem.vue?vue&type=template&id=2ca3dc36&scoped=true\"\nimport script from \"./GoodsListItem.vue?vue&type=script&lang=js\"\nexport * from \"./GoodsListItem.vue?vue&type=script&lang=js\"\n\nimport \"./GoodsListItem.vue?vue&type=style&index=0&id=2ca3dc36&scoped=true&lang=scss\"\n\nimport exportComponent from \"D:\\\\1Master\\\\work\\\\前端\\\\Vue高洛峰\\\\myproject\\\\vueproject\\\\ewshop\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2ca3dc36\"]])\n\nexport default __exports__","import { render } from \"./GoodsList.vue?vue&type=template&id=891873b0&scoped=true\"\nimport script from \"./GoodsList.vue?vue&type=script&lang=js\"\nexport * from \"./GoodsList.vue?vue&type=script&lang=js\"\n\nimport \"./GoodsList.vue?vue&type=style&index=0&id=891873b0&scoped=true&lang=scss\"\n\nimport exportComponent from \"D:\\\\1Master\\\\work\\\\前端\\\\Vue高洛峰\\\\myproject\\\\vueproject\\\\ewshop\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-891873b0\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <nav-bar>\r\n      <template v-slot:default>商品详情:{{id}}</template>\r\n    </nav-bar>\r\n\r\n\r\n    <van-image style=\"margin-top: 50px\"\r\n        width=\"100%\"\r\n        lazy-load\r\n        :src=\"detail.cover_url\"\r\n    />\r\n\r\n    <van-card style=\"text-align: left\"\r\n        :num=\"detail.stock\"\r\n        :price=\"detail.price + '.00'\"\r\n        :desc=\"detail.description\"\r\n        :title=\"detail.title\"\r\n    >\r\n      <template #tags>\r\n        <van-tag plain type=\"danger\">新书</van-tag>\r\n        <van-tag plain type=\"danger\">推荐</van-tag>\r\n      </template>\r\n      <template #footer>\r\n        <van-button round type=\"warning\" @click=\"handleAddCart\">加入购物车</van-button>\r\n        <van-button round type=\"danger\" @click=\"goToCart\">立即购买</van-button>\r\n      </template>\r\n    </van-card>\r\n\r\n    <van-tabs v-model:active=\"active\">\r\n      <van-tab title=\"概述\">\r\n        <div class=\"content\"\r\n             v-html=\"detail.details\">\r\n        </div>\r\n      </van-tab>\r\n      <van-tab title=\"热评\"></van-tab>\r\n      <van-tab title=\"相关图书\">\r\n        <goods-list :goods=\"like_goods\"></goods-list>\r\n      </van-tab>\r\n    </van-tabs>\r\n\r\n\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport NavBar from \"components/common/navbar/NavBar\";\r\nimport GoodsList from \"@/components/content/goods/GoodsList\";\r\nimport {useRoute, useRouter} from \"vue-router\";\r\nimport {useStore} from \"vuex\";\r\nimport {ref, onMounted, reactive, toRefs} from \"vue\";\r\nimport {getDetail} from \"@/network/detail\";\r\nimport {addCart} from \"@/network/cart\";\r\nimport {Toast} from \"vant\";\r\n\r\n\r\nexport default {\r\n  name: \"Detail\",\r\n  components:{\r\n    NavBar,\r\n    GoodsList,\r\n  },\r\n  setup(){\r\n\r\n    let active = ref(0);\r\n\r\n    const route = useRoute();\r\n    const router = useRouter();\r\n    const store = useStore();\r\n\r\n    let id = ref('id');\r\n\r\n    let book = reactive({\r\n      detail:{},\r\n      like_goods:[]\r\n    });\r\n\r\n\r\n    onMounted(()=>{\r\n      id.value = route.query.id;\r\n\r\n      getDetail(id.value).then(res=>{\r\n        book.detail = res.goods;\r\n        book.like_goods = res.like_goods;\r\n        console.log(res);\r\n      })\r\n    })\r\n\r\n    // 添加购物车\r\n    const handleAddCart = () =>{\r\n      // console.log('addCart');\r\n      addCart({goods_id: book.detail.id, query:{num:1}}).then(res=>{\r\n        if(res.status == '201' || res.status == '204') {\r\n          Toast.success(\"添加购物车成功\");\r\n          // 设置store中的购物车的数量（右上角角标）\r\n          store.dispatch('updateCart');\r\n        }\r\n      })\r\n    }\r\n\r\n    // 立即购买\r\n    const goToCart = () =>{\r\n      // console.log('gotocart');\r\n      addCart({goods_id: book.detail.id, query:{num:1}}).then(res=>{\r\n        if(res.status == '201' || res.status == '204') {\r\n          Toast.success(\"添加购物车成功,请去购物车支付\");\r\n          store.dispatch('updateCart');\r\n          router.push({path:'/shopcart'})\r\n        }\r\n      })\r\n    }\r\n\r\n\r\n    return{\r\n      id,\r\n      ...toRefs(book),\r\n      active,\r\n      handleAddCart,\r\n      goToCart,\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\r\n.content{\r\n  padding: 10px;\r\n  margin-bottom: 40px;\r\n  img{\r\n    max-width: 100%;\r\n    height: auto;\r\n\r\n  }\r\n\r\n}\r\n\r\n</style>","import {request} from \"./request\";\r\n\r\nexport function getDetail(id){\r\n    return request({\r\n        url: '/api/goods/'+id,\r\n        method: 'get',\r\n        // params: {}\r\n    })\r\n}","import { render } from \"./Detail.vue?vue&type=template&id=7db080c6\"\nimport script from \"./Detail.vue?vue&type=script&lang=js\"\nexport * from \"./Detail.vue?vue&type=script&lang=js\"\n\nimport \"./Detail.vue?vue&type=style&index=0&id=7db080c6&lang=scss\"\n\nimport exportComponent from \"D:\\\\1Master\\\\work\\\\前端\\\\Vue高洛峰\\\\myproject\\\\vueproject\\\\ewshop\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","src","_imports_0","alt","_createElementBlock","onClick","$setup","_renderSlot","_ctx","_hoisted_2","undefined","name","setup","router","useRouter","goback","go","__exports__","render","_Fragment","_renderList","$props","item","_createBlock","_component_goods_list_item","product","key","cover_url","_toDisplayString","title","_hoisted_4","price","collects_count","props","type","Object","default","itemClick","push","path","query","id","components","GoodsListItem","goods","Array","_createVNode","_component_nav_bar","_component_van_image","style","width","_component_van_card","num","stock","desc","description","tags","_component_van_tag","plain","footer","_component_van_button","round","_component_van_tabs","active","$event","_component_van_tab","innerHTML","details","_component_goods_list","getDetail","request","url","method","NavBar","GoodsList","ref","route","useRoute","store","useStore","book","reactive","detail","like_goods","onMounted","value","then","res","console","log","handleAddCart","addCart","goods_id","status","dispatch","goToCart","toRefs"],"sourceRoot":""}